<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Install Class Software - Teaching with TACC</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Install Class Software";
        var mkdocs_page_input_path = "01.install_software.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Teaching with TACC
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Setting Up</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../01.create_account/">Create a TACC Account</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../01.choose_resource/">Choose the Right Resource</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../01.request_allocation/">Request an Allocation</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../01.manage_accounts.md">Manage Student Accounts</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Install Class Software</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#choose-the-right-install-location">Choose the Right Install Location</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#download-and-install-software">Download and Install Software</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#write-the-modulefile">Write the Modulefile</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#change-permissions">Change Permissions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#instructions-to-use-class-modules">Instructions to Use Class Modules</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Running the Class</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../02.sharing_files/">Share Project Files</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../02.work_interactively/">Work Interactively on a Node</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../02.running_jobs/">Submit Jobs to the Queue</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../02.reservation_requests/">Request a Queue Reservation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../02.helpful_commands/">Helpful Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using the UTRC Portal</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../03.getting_started/">Get Started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../03.managing_data/">Manage Data</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../03.accessing_data/">Access Data</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../03.add_features.md">Additional Features of the UTRC Portal</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Teaching with TACC</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Setting Up</li>
      <li class="breadcrumb-item active">Install Class Software</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/TACC/TeachingWithTACC/edit/master/docs/01.install_software.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="install-class-software">Install Class Software</h1>
<p>When teaching a course, you may have some software packages that the students
will need to use. Rather than having each student install the software in their
own directories, follow this guide to install software in one central location,
then share that software with everyone in the course using modulefiles.</p>
<h2 id="choose-the-right-install-location">Choose the Right Install Location</h2>
<p>Software should be installed in your work directory. Navigate to your work space
and make a new folder for software:</p>
<pre><code>$ cd $STOCKYARD
$ mkdir class-software/
$ cd class-software/
$ pwd
/work/01234/username/class-software/
</code></pre>
<p>Please note: your work directory will be a slightly different path - please
substitute in the path of your work directory when following the guide below.</p>
<h2 id="download-and-install-software">Download and Install Software</h2>
<p>The installation process differs for each software package, and a comprehensive
guide for installing software will not be included here. Please check the
<a href="https://docs.tacc.utexas.edu/">user guides</a> for whichever machine
you are installing on for general installation help.</p>
<p>It is good practice to organize installed software by package name and version.
This will also help later when building modulefiles. As an example, this guide
will show the process to install a tool called <strong>bedtools2</strong>, a toolset for
genome arithmetic, on Lonestar6:</p>
<pre><code># Load a recent gcc module, required for bedtools2
$ module load gcc
</code></pre>
<pre><code># Download and unpack the tool
$ wget https://github.com/arq5x/bedtools2/archive/refs/tags/v2.29.2.tar.gz
$ tar -xvzf v2.29.2.tar.gz
$ cd bedtools2-2.29.2/
</code></pre>
<pre><code># Compile the software
$ make
</code></pre>
<pre><code># Copy the binaries into a standard location
$ DESTDIR=&quot;/work/01234/username/class-software/&quot; prefix=&quot;bedtools2/2.29.2&quot; make install
</code></pre>
<p>The steps above will put the binaries in the folder:</p>
<p><code>/work/01234/username/class-software/bedtools2/2.29.2/bin</code></p>
<p>Please remember, these steps will vary from package to package and will likely
only work as described for this specific package. If you choose, it is now safe
to remove the source folder and tar ball downloaded from GitHub.</p>
<h2 id="write-the-modulefile">Write the Modulefile</h2>
<p>Modules are a simple way to dynamically modify a user's environment such that
specific software packages can be used. For the example above, we only need the
user to load a gcc module first, then add the bedtools2 <code>bin/</code> folder to their
path:</p>
<pre><code># Create a modulefiles directory where all modulefiles will go
$ mkdir -p /work/01234/username/class-software/modulefiles/
$ cd /work/01234/username/class-software/modulefiles/
$ pwd
/work/01234/username/class-software/modulefiles/
</code></pre>
<pre><code># Create a subdirectory and lua file for bedtools2, version 2.29.2
$ mkdir bedtools2/
$ touch bedtools2/2.29.2.lua
</code></pre>
<p>All modulefiles will go in the <code>modulefiles</code> directory under a subfolder named
after the package. Modulefiles have the extension <code>.lua</code> and are named after the
software version. Multiple <code>.lua</code> files can exist in the same package
subdirectory, enabling the support of multiple versions of the same package.</p>
<p>The contents of <code>2.29.2.lua</code> could include:</p>
<pre><code>local help_message = [[
This modulefile was prepared for the students taking A Class 101. Load this
modulefile to gain access to the bedtools2/2.29.2 package. Please note that
gcc is a prerequisite and must be loaded first.

Documentation: https://github.com/arq5x/bedtools2

Version 2.29.2
]]

help(help_message,&quot;\n&quot;)

whatis(&quot;Name: bedtools2&quot;)
whatis(&quot;Version: 2.29.2&quot;)
whatis(&quot;Description: A powerful toolset for genome arithmetic&quot;)
whatis(&quot;URL: https://github.com/arq5x/bedtools2&quot;)

prepend_path(&quot;PATH&quot;, &quot;/work/01234/username/class-software/bedtools2/2.29.2/bin&quot;)
prereq(&quot;gcc&quot;)
</code></pre>
<p>Don't forget to replace the <code>PATH</code> near the end of that file with your work
directory. Please browse the <code>/opt/apps/modulefiles/</code> directory on your TACC
system of choice to see many other examples of modulefiles, or read the
<a href="https://lmod.readthedocs.io">lmod documentation</a>.</p>
<h2 id="change-permissions">Change Permissions</h2>
<p>Next, recursively adjust Linux permissions in the <code>class-software/</code> folder so
that students with the same Unix group can see and access the software.</p>
<pre><code>$ chmod g=u-w /work/01234/username/
$ chmod -R g=u-w /work/01234/username/class-software/
</code></pre>
<p>If you happen to be part of multiple Linux groups, you may also need to change
the group on the software folder to match to instructional allocation. The
group ID can be found in the
<a href="https://www.tacc.utexas.edu/portal/projects">Portal</a> by clicking on
the instructional allocation / project. For example, if the Unix group is
<code>G-876543</code>:</p>
<pre><code>$ chgrp G-876543 /work/01234/username/
$ chgrp -R G-876543 /work/01234/username/class-software/
</code></pre>
<h2 id="instructions-to-use-class-modules">Instructions to Use Class Modules</h2>
<p>Finally, the following steps can be used to access and load the new modulefile,
and use the installed bedtools2 software. These steps apply to both the
instructor who built the software, as well as the students:</p>
<pre><code># Add the modulefile location to your modulepath:
$ module use /work/01234/username/class-software/modulefiles
</code></pre>
<pre><code># Save that modification so it only has to be done once
$ module save
</code></pre>
<pre><code># Print modulefile help text
$ module help bedtools2/2.29.2
</code></pre>
<pre><code># Load the new module
$ module load gcc
$ module load bedtools2/2.29.2
$ which bedtools
/work/01234/username/class-software/bedtools2/2.29.2/bin/bedtools
</code></pre>
<p>If you need help installing software or writing modulefiles, please submit a
ticket through the <a href="https://www.tacc.utexas.edu/about/help/">TACC User Portal</a>.</p>
<p><br></p>
<hr />
<p>Return to the <a href="../">Overview</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../01.request_allocation/" class="btn btn-neutral float-left" title="Request an Allocation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../02.sharing_files/" class="btn btn-neutral float-right" title="Share Project Files">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/TACC/TeachingWithTACC" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../01.request_allocation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../02.sharing_files/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
